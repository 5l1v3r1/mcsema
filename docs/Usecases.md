# Why use mcsema?

Most tools take bitcode and translate it to binaries. Mcsema does the reverse. Lets look at why we would want to do that.

## Analyze the binary rather than the source

Source level analysis is great, but not always possible (e.g. you don't have the source), and misses compiler transformations, re-ordering, and optimizations. Analyzing the actual binary guarantees that you're analyzing the true executed behavior.

## Write one set of analysis tools

Lifting to LLVM IR means that one set of analysis tools can work on both the source and the binary. Maintaining a single set of tools saves development time and effort, and allows for a single set of better tools.

## Re-use existing LLVM-based tools

Its possible to use existing LLVM-based tools on binaries. For instance, its possible to run KLEE or libFuzzer on binary code, or to run optimization or transformation passes.

## Binary modification

Lift to LLVM IR lets you cleanly modify the target program. You can run obfuscation or hardening passes, add features, remove features, rewrite features, or even fix that pesky typo or grammatical error or insane logic! When done, your new creation can be recompiled to a new binary sporting all those changes.

## Open source

Mcsema is open source: there are no hidden surprises, and if you find a bug you can fix the bug (and submit a pull request so that others will know you fixed that bug and be grateful to you). You get the benefit of the community fixing bugs and building extensions that you can use.

# Example Uses

We use mcsema for various analyses projects; some examples are described below. If you are using mcsema please let us know and we'll add you to this list.

## Mcsema -> KLEE

[KLEE](https://klee.github.io/) operates on LLVM bitcode, usually generated by providing source to the LLVM toolchain. Mcsema can lift a binary to LLVM bitcode, permitting KLEE to operate on previously unavailable targets.

## Binary Patching

Mcsema was the base of our [Cyber Grand Challenge](https://blog.trailofbits.com/2015/07/15/how-we-fared-in-the-cyber-grand-challenge/) patching strategy. We were able to use mcsema to translate challenge binaries to bitcode, insert memory safety checks, and re-emit working binaries.

## Apache

Mcsema is still a work in progress, but it can work well even on large and complex binaries. For example, the Apache web server program has been lifted by mcsema into LLVM bitcode which was subsequently recompiled back into a binary form an executed. The resulting binary served pages, executed CGI scripts, and passed the same HTTP test suite as the original.

## libFuzzer

[libFuzzer](http://llvm.org/docs/LibFuzzer.html) operates on LLVM IR. Work is ongoing to make mcsema lifted ir compatible with libFuzzer and ASAN.
